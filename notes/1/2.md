# 账号相关操作

```bash
# 创建root密码
sudo passwd root 
# 输入两次密码，期间没有任何提示
# 切换到root身份
su root
# 编辑亚马逊主机的ssh登录方式 
vi /etc/ssh/sshd_config 
# 把 PasswordAuthentication no 改为 PasswordAuthentication yes 
# ps: 如果没有则新插进去 
# 重启sshd使修改生效
service sshd restart
# 修改root用户名(修改root登录用户名减少主机被暴力破解的风险)
vi /etc/passwd
# 修改第1行第1个root为新的用户名，esc然后:wq保存退出
vi /etc/shadow
# 修改第1行第1个root为新的用户名，esc然后:wq! 强制保存退出
# 重启服务器
reboot
# 使用git bash或者xshell之类的ssh客户端通过用户名密码远程连接
ssh 用户名@ip地址
```

# 搭建ftp服务器

ps：这是单独搭建ftp服务器用于上传下载文件，但是一般不建议这么操作，容易被攻击，如果常用ssh客户端为xShell，那么可以使用xFtp

```
# 使用 yum 安装 vsftpd
yum install -y vsftpd
# 启动 VSFTPD
service vsftpd start
# 查看端口
netstat -nltp | grep 21
# 配置 FTP 权限
# 编辑 /etc/vsftpd/vsftpd.conf，找到下面两处配置并修改：
# 禁用匿名用户  12 YES 改为NO
anonymous_enable=NO
# 禁止切换根目录 101 行 删除#
chroot_local_user=YES
# 重新启动 FTP 服务
service vsftpd restart
# 创建 FTP 用户（useradd 用户名）
useradd web
# 为用户 ftpuser 设置密码
echo "123456" | passwd web --stdin
# 限制用户 ftpuser只能通过 FTP 访问服务器，而不能直接登录服务器：
usermod -s /sbin/nologin web
# 为用户 ftpuser创建主目录并约定：
# /data/ftp 为主目录, 该目录不可上传文件 
# /data/ftp/pub 文件只能上传到该目录下
mkdir -p /data/ftp/pub
# 设置访问权限
chmod a-w /data/ftp && chmod 777 -R /data/ftp/pub
# 设置为用户的主目录：
usermod -d /data/ftp web
```

注意：记得关闭防火墙或者开放FTP默认端口(21)

- 关闭SELinux服务

```
setenforce 0 
```

- 关闭防火墙

```
iptables -F 
```

## 安装node
- 常规安装

- yum 安装

```bash
# 配置yum源
curl --silent --location https://rpm.nodesource.com/setup_10.x | bash
# 安装
yum install -y nodejs
# 配置环境变量
ln -s /usr/bin/node /usr/sbin/node
```

```bash
# 下载node压缩包
wget https://npm.taobao.org/mirrors/node/v10.6.0/node-v10.6.0-linux-x64.tar.xz
# 解压
tar -xvf node-v10.6.0-linux-x64.tar.xz
# 更改node安装目录
mv node-v10.6.0-linux-x64 /root/node
# 配置全局环境变量 
ln -s /root/node/bin/node /usr/sbin/node
ln -s /root/node/bin/npm /usr/sbin/npm
# 安装守护程序pm2
npm i pm2 -g
# 添加pm2软链接
ln -s /root/node/bin/pm2 /usr/sbin/pm2
```

## 安装ngnix
nginx的安装参考 [这里](http://blog.htmler.cn/posts/a5141d63.html)

## 安装mysql

- 常规安装

```bash
# 查看是否有自带的MySql库，如果先有卸载
rpm -qa | grep mysql
# 删除mysql-lib(系统自带的版本过低)
yum remove mysql-libs
# 下载mysql
wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.12-1.el6.x86_64.rpm-bundle.tar 
# 解压
tar -xvf mysql-5.7.12-1.el6.x86_64.rpm-bundle.tar  
# 依次安装mysql包（common、libs、client、server）
rpm -ivh mysql-community-common-5.7.12-1.el6.x86_64.rpm
rpm -ivh mysql-community-libs-5.7.12-1.el6.x86_64.rpm
rpm -ivh mysql-community-client-5.7.12-1.el6.x86_64.rpm  
rpm -ivh mysql-community-server-5.7.12-1.el6.x86_64.rpm 
# 启动mysql服务
service mysqld start
```

- yum安装

```bash
# 下载mysql的yum源
wget https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm
# 安装rpm
rpm -ivh mysql57-community-release-el7-9.noarch.rpm
# 安装mysql
cd /etc/yum.repos.d/
yum install mysql-server -y
# 启动
systemctl start mysqld 
```

```bash
# 查看默认密码
grep 'password' /var/log/mysqld.log
# [Note] A temporary password is generated for root@localhost: x2sX3Gb6+Dtm
# root@localhost: 这里后面就是默认密码
# 登陆
mysql -uroot -p
# 修改默认密码
SET PASSWORD = PASSWORD('Abcd1234.');
# ps：这里需要大小写数组字符相结合，不然会通不过
# 刷新系统权限
flush privileges;
# 开启远程登录权限
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'Abcd1234.' WITH GRANT OPTION;
# 刷新系统权限
flush privileges;
# 接下来就可以远程登陆了
```

## 安装阿帕奇

```bash
# 安装阿帕奇
yum install  httpd  -y
# 开启服务
systemctl start httpd
```

1. 添加阿帕奇工作空间

修改/etc/httpd/conf/httpd.conf配置文件
指定阿帕奇workspace为/var/www/html
修改前

```
<Directory>
   AllowOverride none
   Require all denied
</Directory>
```

修改后

```
<Directory "/var/www/html">
   AllowOverride none
   Require all denied
</Directory>
```

2. 启动服务

```
systemctl start httpd 
```

3. 域名绑定

在/etc/httpd/conf目录下创建default.conf添加如下内容
```
<VirtualHost *:80>
	DocumentRoot "/var/www/html"
	ServerName www.lidg.vip
<VirtualHost>
```

DocumentRoot:工作空间
ServerName：域名